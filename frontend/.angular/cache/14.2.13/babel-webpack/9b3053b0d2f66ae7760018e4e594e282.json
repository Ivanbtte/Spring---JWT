{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/auth/login.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../shared/nav/nav.component\";\n\nfunction LoginComponent_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"El Correo es requerido.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_15_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"El Correo debe tener un formato v\\u00E1lido.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, LoginComponent_div_15_div_1_Template, 2, 0, \"div\", 21);\n    i0.ɵɵtemplate(2, LoginComponent_div_15_div_2_Template, 2, 0, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.email.errors == null ? null : ctx_r0.email.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.email.errors == null ? null : ctx_r0.email.errors[\"email\"]);\n  }\n}\n\nfunction LoginComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"La contrase\\u00F1a es requerida.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, LoginComponent_div_24_div_1_Template, 2, 0, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.password.errors == null ? null : ctx_r1.password.errors[\"required\"]);\n  }\n}\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(formBuilder, router, loginService) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.loginService = loginService;\n      this.passwordFieldType = 'password';\n      this.passwordToggleIcon = 'fa fa-eye';\n      this.loginError = \"\";\n      this.loginForm = this.formBuilder.group({\n        username: ['', [Validators.required, Validators.email]],\n        password: ['', Validators.required]\n      });\n    }\n\n    ngOnInit() {}\n\n    get email() {\n      return this.loginForm.controls.username;\n    }\n\n    get password() {\n      return this.loginForm.controls.password;\n    }\n\n    togglePasswordVisibility() {\n      if (this.passwordFieldType === 'password') {\n        this.passwordFieldType = 'text';\n        this.passwordToggleIcon = 'fa fa-eye-slash';\n      } else {\n        this.passwordFieldType = 'password';\n        this.passwordToggleIcon = 'fa fa-eye';\n      }\n    }\n\n    login() {\n      if (this.loginForm.valid) {\n        this.loginError = \"\";\n        this.loginService.login(this.loginForm.value).subscribe({\n          next: userData => {\n            this.userRole = this.loginService.getUserRole();\n\n            if (this.userRole === 'ADMIN' || this.userRole === 'ROOT' || this.userRole === 'COORDINADOR') {\n              this.router.navigateByUrl('/consultar-publicacion');\n            } else if (this.userRole === 'INVESTIGADOR') {\n              this.router.navigateByUrl('/mis-publicaciones');\n            } else {\n              this.router.navigateByUrl('/inicio'); // Ruta predeterminada si el rol no coincide\n            }\n\n            this.loginForm.reset();\n          },\n          error: errorData => {\n            console.error(errorData);\n            this.loginError = errorData;\n          },\n          complete: () => {}\n        });\n      } else {\n        this.loginForm.markAllAsTouched();\n        alert(\"Error al ingresar los datos.\");\n      }\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.LoginService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 30,\n    vars: 7,\n    consts: [[\"id\", \"contenedor\"], [\"id\", \"contenedorcentrado\"], [\"id\", \"login\"], [\"id\", \"loginform\", 3, \"formGroup\", \"ngSubmit\"], [1, \"text-center\", \"my-3\"], [1, \"fa\", \"fa-user-circle-o\", \"fa-5x\"], [1, \"text-white\"], [1, \"form-group\"], [\"for\", \"exampleInputEmail1\"], [1, \"fa\", \"fa-envelope-o\"], [1, \"input-group\"], [\"formControlName\", \"username\", \"type\", \"email\", \"id\", \"exampleInputEmail1\", \"aria-describedby\", \"emailHelp\", \"placeholder\", \"Ingresar Correo\", 1, \"form-control\"], [\"class\", \"text-white\", 4, \"ngIf\"], [\"for\", \"exampleInputPassword1\"], [1, \"fa\", \"fa-key\"], [1, \"input-group\", \"position-relative\"], [\"formControlName\", \"password\", \"id\", \"exampleInputPassword1\", \"placeholder\", \"Contrase\\u00F1a\", 1, \"form-control\", \"pr-5\", 3, \"type\"], [1, \"input-group-text\", \"position-absolute\", 2, \"right\", \"0px\", \"top\", \"40%\", \"transform\", \"translateY(-50%)\", \"width\", \"40px\", \"height\", \"80%\", \"border-radius\", \"5px\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-block\"], [\"id\", \"derecho\"], [1, \"titulo\"], [4, \"ngIf\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-nav\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelement(6, \"i\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"p\", 6);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 7)(10, \"label\", 8);\n        i0.ɵɵelement(11, \"i\", 9);\n        i0.ɵɵtext(12, \" Correo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelement(14, \"input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, LoginComponent_div_15_Template, 3, 2, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 7)(17, \"label\", 13);\n        i0.ɵɵelement(18, \"i\", 14);\n        i0.ɵɵtext(19, \" Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 15);\n        i0.ɵɵelement(21, \"input\", 16);\n        i0.ɵɵelementStart(22, \"span\", 17);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_span_click_22_listener() {\n          return ctx.togglePasswordVisibility();\n        });\n        i0.ɵɵelement(23, \"i\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(24, LoginComponent_div_24_Template, 2, 1, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"button\", 18);\n        i0.ɵɵtext(26, \"Iniciar Sesi\\u00F3n\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(27, \"div\", 19)(28, \"div\", 20);\n        i0.ɵɵtext(29, \"Bienvenido\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.loginError);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.email.invalid && (ctx.email.dirty || ctx.email.touched));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"type\", ctx.passwordFieldType);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassMap(ctx.passwordToggleIcon);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.password.invalid && (ctx.password.dirty || ctx.password.touched));\n      }\n    },\n    dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i5.NavComponent],\n    styles: [\"body[_ngcontent-%COMP%]{font-family:Overpass,sans-serif;font-weight:400;font-size:100%;color:#1b262c;margin:0;background-color:#5f6769}.input-group-append[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0 15px;margin-bottom:20px}.form-control[_ngcontent-%COMP%]{padding-right:2.5rem}#contenedor[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:100vw;min-height:100vh;width:100%;height:100%;background-image:url(fondo1.731ebf6083b1c06e.png);background-position:center;background-size:cover}#contenedorcentrado[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;min-width:380px;max-width:900px;width:90%;background-color:#333;border-radius:10px;box-shadow:0 0 5px 5px #00000026;padding:30px;box-sizing:border-box}#login[_ngcontent-%COMP%]{width:100%;max-width:320px;min-width:320px;padding:30px 30px 50px;background-color:#928787;box-shadow:0 0 5px 5px #00000026;border-radius:3px;box-sizing:border-box}#loginform[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}#loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-family:Overpass,sans-serif;font-size:120%;color:#f2f4f7;margin-top:15px}#loginform[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;align-items:center}#loginform[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]{margin-right:-1px}#loginform[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:#383636;border:1px solid #ccc;border-radius:5px 0 0 5px;color:#f2f4f7}#loginform[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f2f4f7}#loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Overpass,sans-serif;font-size:110%;color:#1b262c;display:block;width:100%;height:40px;margin-bottom:10px;padding:5px 10px;box-sizing:border-box;border:none;border-radius:5px}#loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-family:Overpass,sans-serif;color:#796f6f}#loginform[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#f2f4f7;box-shadow:0 0 5px #007bff80}#loginform[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#333;border-color:#f2f4f7;border-radius:5px;font-size:16px;padding:10px;width:100%}#loginform[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#787b7e;border-color:#787b7e}#loginform[_ngcontent-%COMP%]   .text-white[_ngcontent-%COMP%]{font-size:12px;margin-top:5px;color:#fff}#derecho[_ngcontent-%COMP%]{text-align:center;width:100%;opacity:.7;padding:20px 50px;box-sizing:border-box}.titulo[_ngcontent-%COMP%]{font-size:300%;color:#dfcdc3}hr[_ngcontent-%COMP%]{border-top:1px solid #8c8b8b;border-bottom:1px solid #dfcdc3}.pie-form[_ngcontent-%COMP%]{font-size:90%;text-align:center;margin-top:15px}.pie-form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-decoration:none;color:#dfcdc3;margin-bottom:3px}.pie-form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#719192}.navbar[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:0 0 10px 10px;box-shadow:0 2px 10px #0000001a}.navbar-brand[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#fff}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#fff;padding:10px 15px;transition:color .3s ease,background-color .3s ease}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#83b5eb;background-color:#fff;border-radius:5px}.navbar-toggler[_ngcontent-%COMP%]{border:none}.navbar-toggler-icon[_ngcontent-%COMP%]{color:#fff}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}@media all and (max-width: 775px){#contenedorcentrado[_ngcontent-%COMP%]{flex-direction:column-reverse}#login[_ngcontent-%COMP%]{margin:0 auto}#derecho[_ngcontent-%COMP%]{padding:20px}#loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:left}}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}