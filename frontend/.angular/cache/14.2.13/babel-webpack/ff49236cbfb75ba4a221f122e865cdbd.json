{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { PLATFORM_ID, Injectable, Inject } from '@angular/core';\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common'; // This service is based on the `ng2-cookies` package which sadly is not a service and does\n\nlet CookieService = /*#__PURE__*/(() => {\n  class CookieService {\n    constructor(document, // Get the `PLATFORM_ID` so we can check if we're in a browser.\n    platformId) {\n      this.document = document;\n      this.platformId = platformId;\n      this.documentIsAccessible = isPlatformBrowser(this.platformId);\n    }\n    /**\r\n     * Get cookie Regular Expression\r\n     *\r\n     * @param name Cookie name\r\n     * @returns property RegExp\r\n     *\r\n     * @author: Stepan Suvorov\r\n     * @since: 1.0.0\r\n     */\n\n\n    static getCookieRegExp(name) {\n      const escapedName = name.replace(/([\\[\\]\\{\\}\\(\\)\\|\\=\\;\\+\\?\\,\\.\\*\\^\\$])/gi, '\\\\$1');\n      return new RegExp('(?:^' + escapedName + '|;\\\\s*' + escapedName + ')=(.*?)(?:;|$)', 'g');\n    }\n    /**\r\n     * Gets the unencoded version of an encoded component of a Uniform Resource Identifier (URI).\r\n     *\r\n     * @param encodedURIComponent A value representing an encoded URI component.\r\n     *\r\n     * @returns The unencoded version of an encoded component of a Uniform Resource Identifier (URI).\r\n     *\r\n     * @author: Stepan Suvorov\r\n     * @since: 1.0.0\r\n     */\n\n\n    static safeDecodeURIComponent(encodedURIComponent) {\n      try {\n        return decodeURIComponent(encodedURIComponent);\n      } catch {\n        // probably it is not uri encoded. return as is\n        return encodedURIComponent;\n      }\n    }\n    /**\r\n     * Return `true` if {@link Document} is accessible, otherwise return `false`\r\n     *\r\n     * @param name Cookie name\r\n     * @returns boolean - whether cookie with specified name exists\r\n     *\r\n     * @author: Stepan Suvorov\r\n     * @since: 1.0.0\r\n     */\n\n\n    check(name) {\n      if (!this.documentIsAccessible) {\n        return false;\n      }\n\n      name = encodeURIComponent(name);\n      const regExp = CookieService.getCookieRegExp(name);\n      return regExp.test(this.document.cookie);\n    }\n    /**\r\n     * Get cookies by name\r\n     *\r\n     * @param name Cookie name\r\n     * @returns property value\r\n     *\r\n     * @author: Stepan Suvorov\r\n     * @since: 1.0.0\r\n     */\n\n\n    get(name) {\n      if (this.documentIsAccessible && this.check(name)) {\n        name = encodeURIComponent(name);\n        const regExp = CookieService.getCookieRegExp(name);\n        const result = regExp.exec(this.document.cookie);\n        return result[1] ? CookieService.safeDecodeURIComponent(result[1]) : '';\n      } else {\n        return '';\n      }\n    }\n    /**\r\n     * Get all cookies in JSON format\r\n     *\r\n     * @returns all the cookies in json\r\n     *\r\n     * @author: Stepan Suvorov\r\n     * @since: 1.0.0\r\n     */\n\n\n    getAll() {\n      if (!this.documentIsAccessible) {\n        return {};\n      }\n\n      const cookies = {};\n      const document = this.document;\n\n      if (document.cookie && document.cookie !== '') {\n        document.cookie.split(';').forEach(currentCookie => {\n          const [cookieName, cookieValue] = currentCookie.split('=');\n          cookies[CookieService.safeDecodeURIComponent(cookieName.replace(/^ /, ''))] = CookieService.safeDecodeURIComponent(cookieValue);\n        });\n      }\n\n      return cookies;\n    }\n\n    set(name, value, expiresOrOptions, path, domain, secure, sameSite) {\n      if (!this.documentIsAccessible) {\n        return;\n      }\n\n      if (typeof expiresOrOptions === 'number' || expiresOrOptions instanceof Date || path || domain || secure || sameSite) {\n        const optionsBody = {\n          expires: expiresOrOptions,\n          path,\n          domain,\n          secure,\n          sameSite: sameSite ? sameSite : 'Lax'\n        };\n        this.set(name, value, optionsBody);\n        return;\n      }\n\n      let cookieString = encodeURIComponent(name) + '=' + encodeURIComponent(value) + ';';\n      const options = expiresOrOptions ? expiresOrOptions : {};\n\n      if (options.expires) {\n        if (typeof options.expires === 'number') {\n          const dateExpires = new Date(new Date().getTime() + options.expires * 1000 * 60 * 60 * 24);\n          cookieString += 'expires=' + dateExpires.toUTCString() + ';';\n        } else {\n          cookieString += 'expires=' + options.expires.toUTCString() + ';';\n        }\n      }\n\n      if (options.path) {\n        cookieString += 'path=' + options.path + ';';\n      }\n\n      if (options.domain) {\n        cookieString += 'domain=' + options.domain + ';';\n      }\n\n      if (options.secure === false && options.sameSite === 'None') {\n        options.secure = true;\n        console.warn(`[ngx-cookie-service] Cookie ${name} was forced with secure flag because sameSite=None.` + `More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`);\n      }\n\n      if (options.secure) {\n        cookieString += 'secure;';\n      }\n\n      if (!options.sameSite) {\n        options.sameSite = 'Lax';\n      }\n\n      cookieString += 'sameSite=' + options.sameSite + ';';\n      this.document.cookie = cookieString;\n    }\n    /**\r\n     * Delete cookie by name\r\n     *\r\n     * @param name   Cookie name\r\n     * @param path   Cookie path\r\n     * @param domain Cookie domain\r\n     * @param secure Cookie secure flag\r\n     * @param sameSite Cookie sameSite flag - https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite\r\n     *\r\n     * @author: Stepan Suvorov\r\n     * @since: 1.0.0\r\n     */\n\n\n    delete(name, path, domain, secure, sameSite = 'Lax') {\n      if (!this.documentIsAccessible) {\n        return;\n      }\n\n      const expiresDate = new Date('Thu, 01 Jan 1970 00:00:01 GMT');\n      this.set(name, '', {\n        expires: expiresDate,\n        path,\n        domain,\n        secure,\n        sameSite\n      });\n    }\n    /**\r\n     * Delete all cookies\r\n     *\r\n     * @param path   Cookie path\r\n     * @param domain Cookie domain\r\n     * @param secure Is the Cookie secure\r\n     * @param sameSite Is the cookie same site\r\n     *\r\n     * @author: Stepan Suvorov\r\n     * @since: 1.0.0\r\n     */\n\n\n    deleteAll(path, domain, secure, sameSite = 'Lax') {\n      if (!this.documentIsAccessible) {\n        return;\n      }\n\n      const cookies = this.getAll();\n\n      for (const cookieName in cookies) {\n        if (cookies.hasOwnProperty(cookieName)) {\n          this.delete(cookieName, path, domain, secure, sameSite);\n        }\n      }\n    }\n\n  }\n\n  CookieService.ɵfac = function CookieService_Factory(t) {\n    return new (t || CookieService)(i0.ɵɵinject(DOCUMENT), i0.ɵɵinject(PLATFORM_ID));\n  };\n\n  CookieService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: CookieService,\n    factory: CookieService.ɵfac,\n    providedIn: 'root'\n  });\n  return CookieService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\r\n * Public API Surface of ngx-cookie-service\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { CookieService }; //# sourceMappingURL=ngx-cookie-service.mjs.map","map":null,"metadata":{},"sourceType":"module"}